<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="account_budget_view_tree" model="ir.ui.view" >
            <field name="name">account.budget.view.tree</field>
            <field name="model">account.budget</field>
            <field name="inherit_id" ref="account_budget_activity.account_budget_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr="/tree/field[@name='released_amount']" position="before">

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />

                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="1" />
                    <field name="project_id" invisible="1" />
                    <field name="fund_id" invisible="1" />

                    <field name="org_id" invisible="1" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />

                    <field name="invest_asset_id" invisible="1" />
                    <field name="invest_construction_id" invisible="1"/>
                    <field name="invest_construction_phase_id" invisible="1" />

                    <field name="personnel_costcenter_id" invisible="1" />
                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="1" /> <!-- for unit base -->
                </xpath>
            </field>
        </record>

        <record id="account_budget_view_form" model="ir.ui.view" >
            <field name="name">account.budget.view.form</field>
            <field name="model">account.budget</field>
            <field name="inherit_id" ref="account_budget_activity.account_budget_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="/form/sheet/group/group//field[@name='creating_user_id']" position="after">
                    <field name="chart_view" required="1" readonly="1"/>
                    <field name="program_id"
                        domain="[('special', '=', False)]"
                        attrs="{'invisible': [('chart_view','!=','project_base')],
                            'required': [('chart_view','=','project_base')],
                            'readonly': [('state','!=','draft')]}"/>
                    <field name="section_id"
                        domain="[('special', '=', False)]"
                        attrs="{'invisible': [('chart_view','!=','unit_base')],
                            'required': [('chart_view','=','unit_base')],
                            'readonly': [('state','!=','draft')]}"/>
                    <field name="org_id"
                        domain="[('special', '=', False)]"
                        attrs="{'invisible': [('chart_view','not in',('invest_asset','invest_construction'))],
                            'required': [('chart_view','in',('invest_asset','invest_construction'))],
                            'readonly': [('state','!=','draft')]}"/>
                </xpath>
                <xpath expr="/form/sheet/group/group//field[@name='budgeted_revenue']" position="attributes">
                    <attribute name="attrs">{'invisible': [('chart_view', 'not in', ('project_base', 'unit_base'))]}</attribute>
                </xpath>
                <xpath expr="/form/sheet/notebook//field[@name='budget_revenue_line_ids']" position="replace">
                    <field name="budget_revenue_line_unit_base" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.unit_base_tree_view',
                                      'default_section_id': section_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'revenue'}" />
                    <field name="budget_revenue_line_project_base" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.project_base_tree_view',
                                      'default_program_id': program_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'revenue'}" />
                    <field name="budget_revenue_line_personnel" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.personnel_tree_view',
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'revenue'}" />
                    <field name="budget_revenue_line_invest_asset" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.invest_asset_tree_view',
                                      'default_org_id': org_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'revenue'}" />
                    <field name="budget_revenue_line_invest_construction" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.invest_construction_tree_view',
                                      'default_org_id': org_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'revenue'}" />
                </xpath>
                <xpath expr="/form/sheet/notebook//field[@name='budget_expense_line_ids']" position="replace">
                    <field name="budget_expense_line_unit_base" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.unit_base_tree_view',
                                      'default_section_id': section_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'expense'}" />
                    <field name="budget_expense_line_project_base" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.project_base_tree_view',
                                      'default_program_id': program_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'expense'}" />
                    <field name="budget_expense_line_personnel" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.personnel_tree_view',
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'expense'}" />
                    <field name="budget_expense_line_invest_asset" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.invest_asset_tree_view',
                                      'default_org_id': org_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'expense'}" />
                    <field name="budget_expense_line_invest_construction" colspan="4" nolabel="1"
                            context="{'tree_view_ref': 'pabi_chartfield.invest_construction_tree_view',
                                      'default_org_id': org_id,
                                      'default_fiscalyear_id': fiscalyear_id,
                                      'default_budget_method': 'expense'}" />
                </xpath>
            </field>
        </record>

        # Tree Views for all Structue
        <record id="unit_base_tree_view" model="ir.ui.view">
            <field name="name">unit.base.tree.view</field>
            <field name="model">account.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Budget Lines" editable="bottom" >
                    <field name="budget_method" invisible="1"/>

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />

                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="1" />
                    <field name="project_id" invisible="1" />
                    <field name="fund_id" invisible="0" />

                    <field name="org_id" invisible="1" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />

                    <field name="invest_asset_id" invisible="1" />
                    <!-- <field name="item_id" widget="many2one_clickable" invisible="1" /> -->
                    <field name="invest_construction_id" invisible="1"/>
                    <field name="invest_construction_phase_id" invisible="1" />

                    <field name="personnel_costcenter_id" invisible="1" />
                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="0" /> <!-- for unit base -->

                    <!-- ACTIVITY -->
                    <field name="activity_group_id" invisible="0"/>
                    <field name="activity_id" invisible="1" domain="[('activity_group_ids', 'in', [activity_group_id or -1]), ('budget_method', '=', budget_method)]"/>

                    <!-- PERIOD -->
                    <field name="planned_amount" sum="Planned Amount"/>
                    <field name="budget_release" invisible="1"/>
                    <button name="%(account_budget_activity.action_budget_release_wizard)d"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"
                      string="Release Budget" type="action" icon="terp-gtk-jump-to-ltr"/>
                    <field name="released_amount" sum="Released"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"/>
                    <field name="current_period" invisible="1"/>
                    <field name="m1" attrs="{'readonly': [('current_period', '>=', 1)]}" sum="m1"/>
                    <field name="m2" attrs="{'readonly': [('current_period', '>=', 2)]}" sum="m2"/>
                    <field name="m3" attrs="{'readonly': [('current_period', '>=', 3)]}" sum="m3"/>
                    <field name="m4" attrs="{'readonly': [('current_period', '>=', 4)]}" sum="m4"/>
                    <field name="m5" attrs="{'readonly': [('current_period', '>=', 5)]}" sum="m5"/>
                    <field name="m6" attrs="{'readonly': [('current_period', '>=', 6)]}" sum="m6"/>
                    <field name="m7" attrs="{'readonly': [('current_period', '>=', 7)]}" sum="m7"/>
                    <field name="m8" attrs="{'readonly': [('current_period', '>=', 8)]}" sum="m8"/>
                    <field name="m9" attrs="{'readonly': [('current_period', '>=', 9)]}" sum="m9"/>
                    <field name="m10" attrs="{'readonly': [('current_period', '>=', 10)]}" sum="m10"/>
                    <field name="m11" attrs="{'readonly': [('current_period', '>=', 11)]}" sum="m11"/>
                    <field name="m12" attrs="{'readonly': [('current_period', '>=', 12)]}" sum="m12"/>
                    <field name="period_split_line_ids" invisible="1"/>
                    <button name="%(account_budget_activity.act_account_budget_line_split_period_view)d"
                            string="Split Budget Line Period Wise"
                            type="action" invisible="1"
                            icon="gtk-justify-fill" />
                </tree>
            </field>
        </record>

        <record id="project_base_tree_view" model="ir.ui.view">
            <field name="name">project.base.tree.view</field>
            <field name="model">account.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Budget Lines" editable="bottom" >
                    <field name="budget_method" invisible="1"/>

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />

                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="0" />
                    <field name="project_id" invisible="0" />
                    <field name="fund_id" required="1" invisible="0" />

                    <field name="org_id" invisible="1" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />

                    <field name="invest_asset_id" invisible="1" />
                    <!-- <field name="item_id" widget="many2one_clickable" invisible="1" /> -->
                    <field name="invest_construction_id" invisible="1"/>
                    <field name="invest_construction_phase_id" invisible="1" />

                    <field name="personnel_costcenter_id" invisible="1" />
                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="1" />

                    <!-- ACTIVITY -->
                    <field name="activity_group_id" invisible="0"/>
                    <field name="activity_id" invisible="1" domain="[('activity_group_ids', 'in', [activity_group_id or -1]), ('budget_method', '=', budget_method)]"/>

                    <!-- PERIOD -->
                    <field name="planned_amount" sum="Planned Amount"/>
                    <field name="budget_release" invisible="1"/>
                    <button name="%(account_budget_activity.action_budget_release_wizard)d"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"
                      string="Release Budget" type="action" icon="terp-gtk-jump-to-ltr"/>
                    <field name="released_amount" sum="Released"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"/>
                    <field name="current_period" invisible="1"/>
                    <field name="m1" attrs="{'readonly': [('current_period', '>=', 1)]}" sum="m1"/>
                    <field name="m2" attrs="{'readonly': [('current_period', '>=', 2)]}" sum="m2"/>
                    <field name="m3" attrs="{'readonly': [('current_period', '>=', 3)]}" sum="m3"/>
                    <field name="m4" attrs="{'readonly': [('current_period', '>=', 4)]}" sum="m4"/>
                    <field name="m5" attrs="{'readonly': [('current_period', '>=', 5)]}" sum="m5"/>
                    <field name="m6" attrs="{'readonly': [('current_period', '>=', 6)]}" sum="m6"/>
                    <field name="m7" attrs="{'readonly': [('current_period', '>=', 7)]}" sum="m7"/>
                    <field name="m8" attrs="{'readonly': [('current_period', '>=', 8)]}" sum="m8"/>
                    <field name="m9" attrs="{'readonly': [('current_period', '>=', 9)]}" sum="m9"/>
                    <field name="m10" attrs="{'readonly': [('current_period', '>=', 10)]}" sum="m10"/>
                    <field name="m11" attrs="{'readonly': [('current_period', '>=', 11)]}" sum="m11"/>
                    <field name="m12" attrs="{'readonly': [('current_period', '>=', 12)]}" sum="m12"/>
                </tree>
            </field>
        </record>

        <record id="personnel_tree_view" model="ir.ui.view">
            <field name="name">personnel.tree.view</field>
            <field name="model">account.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Budget Lines" editable="bottom" >
                    <field name="budget_method" invisible="1"/>

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />
                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="1" />
                    <field name="project_id" invisible="1" />
                    <field name="fund_id" invisible="0" />

                    <field name="org_id" invisible="0" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />
                    <field name="invest_asset_id" invisible="1" />
                    <!-- <field name="item_id" widget="many2one_clickable" invisible="1" /> -->
                    <field name="invest_construction_id" invisible="1"/>
                    <field name="invest_construction_phase_id" invisible="1" />
                    <field name="personnel_costcenter_id" invisible="0" />
                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="1" />
                    <!-- ACTIVITY -->
                    <field name="activity_group_id" invisible="0"/>
                    <field name="activity_id" invisible="1"  domain="[('activity_group_ids', 'in', [activity_group_id or -1]), ('budget_method', '=', budget_method)]"/>
                    <!-- PERIOD -->
                    <field name="planned_amount" sum="Planned Amount"/>
                    <field name="budget_release" invisible="1"/>
                    <button name="%(account_budget_activity.action_budget_release_wizard)d"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"
                      string="Release Budget" type="action" icon="terp-gtk-jump-to-ltr"/>
                    <field name="released_amount" sum="Released"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"/>
                    <field name="current_period" invisible="1"/>
                    <field name="m1" attrs="{'readonly': [('current_period', '>=', 1)]}" sum="m1"/>
                    <field name="m2" attrs="{'readonly': [('current_period', '>=', 2)]}" sum="m2"/>
                    <field name="m3" attrs="{'readonly': [('current_period', '>=', 3)]}" sum="m3"/>
                    <field name="m4" attrs="{'readonly': [('current_period', '>=', 4)]}" sum="m4"/>
                    <field name="m5" attrs="{'readonly': [('current_period', '>=', 5)]}" sum="m5"/>
                    <field name="m6" attrs="{'readonly': [('current_period', '>=', 6)]}" sum="m6"/>
                    <field name="m7" attrs="{'readonly': [('current_period', '>=', 7)]}" sum="m7"/>
                    <field name="m8" attrs="{'readonly': [('current_period', '>=', 8)]}" sum="m8"/>
                    <field name="m9" attrs="{'readonly': [('current_period', '>=', 9)]}" sum="m9"/>
                    <field name="m10" attrs="{'readonly': [('current_period', '>=', 10)]}" sum="m10"/>
                    <field name="m11" attrs="{'readonly': [('current_period', '>=', 11)]}" sum="m11"/>
                    <field name="m12" attrs="{'readonly': [('current_period', '>=', 12)]}" sum="m12"/>
                </tree>
            </field>
        </record>

        <record id="invest_asset_tree_view" model="ir.ui.view">
            <field name="name">invest.asset.tree.view</field>
            <field name="model">account.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Budget Lines" editable="bottom" >
                    <field name="budget_method" invisible="1"/>

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />

                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="1" />
                    <field name="project_id" invisible="1" />
                    <field name="fund_id" invisible="0" />

                    <field name="org_id" invisible="1" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />

                    <field name="invest_asset_id" invisible="0" />
                    <!-- <field name="item_id" widget="many2one_clickable" invisible="0" /> -->
                    <field name="invest_construction_id" invisible="1"/>
                    <field name="invest_construction_phase_id" invisible="1" />

                    <field name="personnel_costcenter_id" invisible="1" />
                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="1" />
                    <!-- ACTIVITY -->
                    <field name="activity_group_id" invisible="1"/>
                    <field name="activity_id" invisible="1"  domain="[('activity_group_ids', 'in', [activity_group_id or -1]), ('budget_method', '=', budget_method)]"/>
                    <!-- PERIOD -->
                    <field name="planned_amount" sum="Planned Amount"/>
                    <field name="budget_release" invisible="1"/>
                    <button name="%(account_budget_activity.action_budget_release_wizard)d"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"
                      string="Release Budget" type="action" icon="terp-gtk-jump-to-ltr"/>
                    <field name="released_amount" sum="Released"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"/>
                    <field name="current_period" invisible="1"/>
                    <field name="m1" attrs="{'readonly': [('current_period', '>=', 1)]}" sum="m1"/>
                    <field name="m2" attrs="{'readonly': [('current_period', '>=', 2)]}" sum="m2"/>
                    <field name="m3" attrs="{'readonly': [('current_period', '>=', 3)]}" sum="m3"/>
                    <field name="m4" attrs="{'readonly': [('current_period', '>=', 4)]}" sum="m4"/>
                    <field name="m5" attrs="{'readonly': [('current_period', '>=', 5)]}" sum="m5"/>
                    <field name="m6" attrs="{'readonly': [('current_period', '>=', 6)]}" sum="m6"/>
                    <field name="m7" attrs="{'readonly': [('current_period', '>=', 7)]}" sum="m7"/>
                    <field name="m8" attrs="{'readonly': [('current_period', '>=', 8)]}" sum="m8"/>
                    <field name="m9" attrs="{'readonly': [('current_period', '>=', 9)]}" sum="m9"/>
                    <field name="m10" attrs="{'readonly': [('current_period', '>=', 10)]}" sum="m10"/>
                    <field name="m11" attrs="{'readonly': [('current_period', '>=', 11)]}" sum="m11"/>
                    <field name="m12" attrs="{'readonly': [('current_period', '>=', 12)]}" sum="m12"/>
                </tree>
            </field>
        </record>

        <record id="invest_construction_tree_view" model="ir.ui.view">
            <field name="name">invest.construction.tree.view</field>
            <field name="model">account.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Budget Lines" editable="bottom" >
                    <field name="budget_method" invisible="1"/>

                    <field name="spa_id" invisible="1"/>
                    <field name="mission_id" invisible="1" />
                    <field name="tag_type_id" invisible="1" />
                    <field name="tag_id" invisible="1" />

                    <field name="functional_area_id" invisible="1" />
                    <field name="program_group_id" invisible="1" />
                    <field name="program_id" invisible="1" />
                    <field name="project_group_id" invisible="1" />
                    <field name="project_id" invisible="1" />
                    <field name="fund_id" invisible="0" />

                    <field name="org_id" invisible="1" />
                    <field name="sector_id" invisible="1" />
                    <field name="subsector_id" invisible="1"/>
                    <field name="division_id" invisible="1" />
                    <field name="section_id" invisible="1" />
                    <field name="costcenter_id" invisible="1" />
                    <field name="taxbranch_id" invisible="1" />

                    <field name="invest_asset_id" invisible="1" />
                    <!-- <field name="item_id" widget="many2one_clickable" invisible="1" /> -->

                    <field name="invest_construction_id" invisible="0"/>
                    <field name="invest_construction_phase_id" invisible="0" />

                    <field name="personnel_costcenter_id" invisible="1" />

                    <field name="cost_control_type_id" invisible="1"/>
                    <field name="cost_control_id" invisible="1" />

                    <!-- ACTIVITY -->
                    <field name="activity_group_id" invisible="1"/>
                    <field name="activity_id" invisible="1"  domain="[('activity_group_ids', 'in', [activity_group_id or -1]), ('budget_method', '=', budget_method)]"/>

                    <!-- PERIOD -->

                    <field name="planned_amount" sum="Planned Amount"/>
                    <field name="budget_release" invisible="1"/>
                    <button name="%(account_budget_activity.action_budget_release_wizard)d"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"
                      string="Release Budget" type="action" icon="terp-gtk-jump-to-ltr"/>
                    <field name="released_amount" sum="Released"
                      attrs="{'invisible': [('budget_release', 'not in', ('auto', 'manual_line'))]}"/>
                    <field name="current_period" invisible="1"/>
                    <field name="m1" attrs="{'readonly': [('current_period', '>=', 1)]}" sum="m1"/>
                    <field name="m2" attrs="{'readonly': [('current_period', '>=', 2)]}" sum="m2"/>
                    <field name="m3" attrs="{'readonly': [('current_period', '>=', 3)]}" sum="m3"/>
                    <field name="m4" attrs="{'readonly': [('current_period', '>=', 4)]}" sum="m4"/>
                    <field name="m5" attrs="{'readonly': [('current_period', '>=', 5)]}" sum="m5"/>
                    <field name="m6" attrs="{'readonly': [('current_period', '>=', 6)]}" sum="m6"/>
                    <field name="m7" attrs="{'readonly': [('current_period', '>=', 7)]}" sum="m7"/>
                    <field name="m8" attrs="{'readonly': [('current_period', '>=', 8)]}" sum="m8"/>
                    <field name="m9" attrs="{'readonly': [('current_period', '>=', 9)]}" sum="m9"/>
                    <field name="m10" attrs="{'readonly': [('current_period', '>=', 10)]}" sum="m10"/>
                    <field name="m11" attrs="{'readonly': [('current_period', '>=', 11)]}" sum="m11"/>
                    <field name="m12" attrs="{'readonly': [('current_period', '>=', 12)]}" sum="m12"/>
                </tree>
            </field>
        </record>

        <!-- Menu for 5 types of budget structure -->
        <!-- 1) Unit Base (reuse generic Budgets menu) -->

        <record id="view_account_budget_unit_base_search" model="ir.ui.view">
            <field name="name">view.account.budget.unit_base_search</field>
            <field name="model">account.budget</field>
            <field name="arch" type="xml">
                <search string="Budget">
                    <field name="name" filter_domain="[('name','ilike',self)]" string="Budget"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="state"/>
                    <separator/>
                    <field name="org_id"/>
                    <field name="section_id"/>
                    <separator/>>
                    <filter string="My Org Budgets" name="my_org_budgets" context="{'my_org_budgets': True}"/>
                    <filter string="My Section Budgets" name="my_section_budgets" context="{'my_section_budgets': True}"/>
                    <filter string="My Division Budgets" name="my_division_budgets" context="{'my_division_budgets': True}"/>
                    <filter string="This Fiscalyear" name="this_year_budgets" context="{'this_year_plans': True}"/>
                    <separator/>
                    <filter domain="[('state','=','draft')]" string="Draft"/>
                    <filter domain="[('state','=','done')]" string="Controlled"/>
                    <group expand="0" string="Group By">
                        <filter string="Org" context="{'group_by':'org_id'}"/>
                        <filter string="Division" context="{'group_by':'division_id'}"/>
                        <filter string="Section" context="{'group_by':'section_id'}"/>
                        <filter string="Fiscal Year" context="{'group_by':'fiscalyear_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="account_budget_activity.act_account_budget_view">
            <field name="name">Unit Based</field>
            <field name="res_model">account.budget</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_budget_activity.account_budget_view_tree"/>
            <field name="search_view_id" ref="view_account_budget_unit_base_search"/>
            <field name="domain">[('chart_view', '=', 'unit_base')]</field>
            <field name="context">{'default_chart_view': 'unit_base'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new budget.
              </p>
            </field>
        </record>

        <menuitem id="account_budget_activity.menu_act_account_budget_view"
            parent="account_budget_activity.menu_action_account_budget_control"
            action="account_budget_activity.act_account_budget_view" sequence="1" />

        <!-- 2) Project Base -->
        <record id="view_account_budget_project_base_search" model="ir.ui.view">
            <field name="name">view.account.budget.project_base_search</field>
            <field name="model">account.budget</field>
            <field name="arch" type="xml">
                <search string="Budget">
                    <field name="name" filter_domain="[('name','ilike',self)]" string="Budget"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="state"/>
                    <separator/>
                    <field name="functional_area_id"/>
                    <field name="program_id"/>
                    <separator/>
                    <filter string="This Fiscalyear" name="this_year_budgets" context="{'this_year_plans': True}"/>
                    <separator/>
                    <filter domain="[('state','=','draft')]" string="Draft"/>
                    <filter domain="[('state','=','done')]" string="Controlled"/>
                    <group expand="0" string="Group By">
                        <filter string="Funcational Area" context="{'group_by':'functional_area_id'}"/>
                        <filter string="Programs" context="{'group_by':'program_id'}"/>
                        <filter string="Fiscal Year" context="{'group_by':'fiscalyear_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="act_account_budget_view_project_base">
            <field name="name">Project Based</field>
            <field name="res_model">account.budget</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_budget_activity.account_budget_view_tree"/>
            <!-- TODO: currrently, we use the one form unit based, change to its own -->
            <field name="search_view_id" ref="view_account_budget_project_base_search"/>
            <field name="domain">[('chart_view', '=', 'project_base')]</field>
            <field name="context">{'default_chart_view': 'project_base'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new budget.
              </p>
            </field>
        </record>

        <menuitem id="menu_act_account_budget_view_project_base"
            parent="account_budget_activity.menu_action_account_budget_control"
            action="act_account_budget_view_project_base" sequence="2" />

        <!-- 3) Personnel -->

        <record model="ir.actions.act_window" id="act_account_budget_view_personnel">
            <field name="name">Personnel</field>
            <field name="res_model">account.budget</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_budget_activity.account_budget_view_tree"/>
            <!-- TODO: currrently, we use the one form unit based, change to its own -->
            <field name="search_view_id" ref="view_account_budget_unit_base_search"/>
            <!-- <field name="search_view_id" ref="view_account_budget_personned_search"/> -->
            <field name="domain">[('chart_view', '=', 'personnel')]</field>
            <field name="context">{'default_chart_view': 'personnel'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new budget.
              </p>
            </field>
        </record>

        <menuitem id="menu_act_account_budget_view_personnel"
            parent="account_budget_activity.menu_action_account_budget_control"
            action="act_account_budget_view_personnel" sequence="3" />

        <!-- 4) Invest Asset -->
        <record id="view_account_budget_invest_asset__search" model="ir.ui.view">
            <field name="name">view.account.budget.invest_asset__search</field>
            <field name="model">account.budget</field>
            <field name="arch" type="xml">
                <search string="Budget">
                    <field name="name" filter_domain="[('name','ilike',self)]" string="Budget"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="state"/>
                    <separator/>
                    <field name="org_id"/>
                    <separator/>
                    <filter string="This Fiscalyear" name="this_year_budgets" context="{'this_year_plans': True}"/>
                    <separator/>
                    <filter domain="[('state','=','draft')]" string="Draft"/>
                    <filter domain="[('state','=','done')]" string="Controlled"/>
                    <group expand="0" string="Group By">
                        <filter string="Org" context="{'group_by':'org_id'}"/>
                        <filter string="Fiscal Year" context="{'group_by':'fiscalyear_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="act_account_budget_view_invest_asset">
            <field name="name">Investment Asset</field>
            <field name="res_model">account.budget</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_budget_activity.account_budget_view_tree"/>
            <!-- TODO: currrently, we use the one form unit based, change to its own -->
            <field name="search_view_id" ref="view_account_budget_unit_base_search"/>
            <!-- <field name="search_view_id" ref="view_account_budget_invest_asset_search"/> -->
            <field name="domain">[('chart_view', '=', 'invest_asset')]</field>
            <field name="context">{'default_chart_view': 'invest_asset'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new budget.
              </p>
            </field>
        </record>

        <menuitem id="menu_act_account_budget_view_invest_asset"
            parent="account_budget_activity.menu_action_account_budget_control"
            action="act_account_budget_view_invest_asset" sequence="4" />

        <!-- 5) Invest Construction -->

        <record model="ir.actions.act_window" id="act_account_budget_view_invest_construction">
            <field name="name">Investment Construction</field>
            <field name="res_model">account.budget</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_budget_activity.account_budget_view_tree"/>
            <!-- TODO: currrently, we use the one form unit based, change to its own -->
            <field name="search_view_id" ref="view_account_budget_unit_base_search"/>
            <!-- <field name="search_view_id" ref="view_account_budget_invest_construction_search"/> -->
            <field name="domain">[('chart_view', '=', 'invest_construction')]</field>
            <field name="context">{'default_chart_view': 'invest_construction'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new budget.
              </p>
            </field>
        </record>

        <menuitem id="menu_act_account_budget_view_invest_construction"
            parent="account_budget_activity.menu_action_account_budget_control"
            action="act_account_budget_view_invest_construction" sequence="5" />

     </data>
</openerp>
